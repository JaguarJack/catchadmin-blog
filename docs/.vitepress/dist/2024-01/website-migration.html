<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>è®°ä¸€æ¬¡ç½‘ç«™è¿ç§» | VitePress</title>
    <meta name="description" content="A VitePress site">
    <meta name="generator" content="VitePress v1.0.0-rc.40">
    <link rel="preload stylesheet" href="/blog/assets/style.p90KqKtV.css" as="style">
    
    <script type="module" src="/blog/assets/app.jK_tlu81.js"></script>
    <link rel="preload" href="/blog/assets/inter-roman-latin.bvIUbFQP.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/blog/assets/chunks/framework.87uzyZYd.js">
    <link rel="modulepreload" href="/blog/assets/chunks/theme.sZ_mZoxJ.js">
    <link rel="modulepreload" href="/blog/assets/2024-01_website-migration.md.1bYjYX0S.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div><div style="position:relative;" class="vp-doc"><div><h1 id="è®°ä¸€æ¬¡å®˜ç½‘è¿ç§»" tabindex="-1">è®°ä¸€æ¬¡å®˜ç½‘è¿ç§» <a class="header-anchor" href="#è®°ä¸€æ¬¡å®˜ç½‘è¿ç§»" aria-label="Permalink to &quot;è®°ä¸€æ¬¡å®˜ç½‘è¿ç§»&quot;">â€‹</a></h1><p>æœ€è¿‘åœ¨ç¾¤é‡Œåšäº†å®˜ç½‘å‡çº§æŠ•ç¥¨ï¼Œå¤§å®¶ä¸€è‡´è®¤ä¸ºéœ€è¦ç»™å®˜ç½‘æ¢æ¢çš®è‚¤ï¼Œé‚è¶ç€ Laravel11 å‘å¸ƒå‰å¤•ï¼Œå°†å®˜ç½‘å…¨éƒ¨ä½¿ç”¨ Laravel11 é‡æ„äº†ã€‚è¿™é‡Œå¿…é¡»å¤¸å¤¸ Laravel11ï¼ŒçœŸçš„æ˜¯ too simpleï¼Œéª¨æ¶éå¸¸ç®€å•ã€‚é¡¹ç›®ä¹Ÿå¯ä»¥æ— ç¼å‡çº§ã€‚æœŸå¾…å‘å¸ƒã€‚ ä¸»è¦åˆ†ä¸ºä»¥ä¸‹æ­¥éª¤</p><nav class="table-of-contents"><ul><li><a href="#è¿ç§»ä»£ç ">è¿ç§»ä»£ç </a></li><li><a href="#éƒ¨ç½²æ–°ç¯å¢ƒ">éƒ¨ç½²æ–°ç¯å¢ƒ</a><ul><li><a href="#æ‰“åŒ…é•œåƒ">æ‰“åŒ…é•œåƒ</a></li><li><a href="#åˆ›å»ºè¯ä¹¦">åˆ›å»ºè¯ä¹¦</a></li></ul></li><li><a href="#ci-cd-è‡ªåŠ¨åŒ–">CI/CD è‡ªåŠ¨åŒ–</a></li><li><a href="#éƒ¨ç½²æ–°æ–‡æ¡£">éƒ¨ç½²æ–°æ–‡æ¡£</a></li></ul></nav><h2 id="è¿ç§»ä»£ç " tabindex="-1">è¿ç§»ä»£ç  <a class="header-anchor" href="#è¿ç§»ä»£ç " aria-label="Permalink to &quot;è¿ç§»ä»£ç &quot;">â€‹</a></h2><p>å› ä¸ºæœ€è¿‘è…¾è®¯äº‘æœåŠ¡å™¨å¿«åˆ°æœŸäº†ï¼Œæ‰€ä»¥æ­£å¥½æœ‰æ–°ä¹°äº†æœåŠ¡å™¨ï¼Œæ‰€ä»¥éœ€è¦åšä»£ç è¿ç§»ã€‚è¿ç§»è¿‡ç¨‹å°±å¾ˆç®€å•ï¼Œä½¿ç”¨ <code>scp</code> å°†ä»£ç æ‹‰åˆ°äº†æ–°çš„æœåŠ¡å™¨ã€‚ä½¿ç”¨ <code>scp</code> çœŸçš„éå¸¸æ–¹ä¾¿ã€‚</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å‰é¢æ˜¯è¿œç¨‹æœåŠ¡å™¨çš„ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#åé¢æ˜¯ä¸‹è½½çš„å½“å‰ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> username@host:/path ./path</span></span></code></pre></div><p>ç›®å‰ <code>CatchAdmin</code> å®˜ç½‘æ˜¯ä½¿ç”¨ Docker éƒ¨ç½²çš„ã€‚ç›®å½•åˆ†å¸ƒæ˜¯è¿™æ ·çš„</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> docker</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">compose.yaml </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// docker compose</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nginx </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// nginx ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mysql </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// mysql ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> php </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// php ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> project </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é¡¹ç›®ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> redis </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// reids</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gitea </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// gitea æœåŠ¡</span></span></code></pre></div><p>é™¤äº† <code>project</code> ç›®å½•ï¼Œå…¶ä»–çš„éƒ½æ˜¯ä¸€ä¸ªä¸€ä¸ªæ‹‰è¿‡å»çš„ï¼Œå› ä¸º<code> project</code> ç›®å½•çš„é¡¹ç›®ä¹‹åéƒ½æ˜¯ <code>github action</code> è‡ªåŠ¨éƒ¨ç½²äº†ï¼Œæ‰€ä»¥å°±ä¸æ‹‰å–äº†ã€‚</p><h2 id="éƒ¨ç½²æ–°ç¯å¢ƒ" tabindex="-1">éƒ¨ç½²æ–°ç¯å¢ƒ <a class="header-anchor" href="#éƒ¨ç½²æ–°ç¯å¢ƒ" aria-label="Permalink to &quot;éƒ¨ç½²æ–°ç¯å¢ƒ&quot;">â€‹</a></h2><p>é¡¹ç›®ä»£ç è¿ç§»çš„è¿‡ç¨‹æ²¡æœ‰ä»€ä¹ˆå¥½è¯´çš„ï¼Œéå¸¸é¡ºåˆ©ã€‚ç„¶åå°±æ˜¯ç¯å¢ƒã€‚ç¯å¢ƒå…¶å®ä¹Ÿæ²¡å•¥é—®é¢˜ï¼Œ<code>docker-compose</code> å·²ç»æ‰“åŒ…äº†ç¯å¢ƒï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œåªä¸è¿‡å…¶ä¸­æœ‰çš„ docker é•œåƒæ— æ³•ä½¿ç”¨ï¼Œå› ä¸ºæ˜¯æœ¬åœ°çš„é•œåƒï¼Œæ²¡æœ‰æäº¤åˆ° docker hubï¼Œæ‰€ä»¥æ— æ³•ä½¿ç”¨ã€‚æœ¬æ¥æ‰“ç®—å°†è¿™äº›é•œåƒæ¨é€åˆ° Docker hubï¼Œæ— å¥ˆå›½å†…çš„ç½‘ç»œç¯å¢ƒå®åœ¨æ˜¯å¤ªæ¶åŠ£ï¼Œæ ¹æœ¬æ²¡æœ‰åŠæ³•æ¨é€ï¼Œæ‰€ä»¥åªèƒ½å°†é•œåƒæ‰“åŒ…ä¼ è¾“äº†ã€‚</p><h3 id="æ‰“åŒ…é•œåƒ" tabindex="-1">æ‰“åŒ…é•œåƒ <a class="header-anchor" href="#æ‰“åŒ…é•œåƒ" aria-label="Permalink to &quot;æ‰“åŒ…é•œåƒ&quot;">â€‹</a></h3><p>ä½¿ç”¨ä¸‹é¢ä¸¤ä¸ªå‘½ä»¤è¿ç§»é•œåƒ</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŠŠé•œåƒæ‰“åŒ…æˆ tar</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> save image:latest</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> image.tar</span></span></code></pre></div><p>æ‰“åŒ…æˆ tar ä¹‹åå‘¢ï¼Œå†ä½¿ç”¨ <code>scp</code> æ‹‰å–è¿™ä¸ªé•œåƒåŒ…ï¼Œç„¶ååœ¨æ–°æœåŠ¡å™¨å¯¼å…¥</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å¯¼å…¥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> load image.tar</span></span></code></pre></div><p>okï¼Œæ‰€ä»¥ä¸€æ¬¡å‡†å¤‡å°±ç»ªä¹‹åï¼Œä¸‹è½½ Dockerï¼Œå› ä¸ºæˆ‘çš„ç³»ç»Ÿä½¿ç”¨çš„ <code>Centos</code>ï¼Œæ‰€ä»¥è¦å…ˆæŸ¥çœ‹ Docker æ–‡æ¡£å®‰è£… Dockerï¼Œå¦‚ä¸‹:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum-config-manager</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add-repo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://download.docker.com/linux/centos/docker-ce.repo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¿™ä¸€æ­¥ç›´æ¥å®‰è£… docker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span></span></code></pre></div><p>ç›´æ¥å¯åŠ¨å§ ğŸš€ï¼Œç­‰ç­‰ï¼Œä¸æ˜¯ä½¿ç”¨ <code>Docker compose</code> å—? ä¸ºä»€ä¹ˆæ²¡æœ‰å®‰è£…å‘¢ï¼Ÿå› ä¸º <code>Docker compose</code> å·²ç»å®‰è£…è¿‡äº†å•Šï¼Œå› ä¸ºç°åœ¨å®ƒå·²ç»å‡çº§äº†, å°±æ˜¯è¿™ä¸ª</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yun</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install docker-compose-plugin</span></span></code></pre></div><p>åœ¨ä¸Šé¢çš„å‘½ä»¤å·²ç»å®‰è£…è¿‡äº† ğŸ‘Œã€‚ç›´æ¥</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose up -d</span></span></code></pre></div><p>è¾“å‡ºä¸€ä¸ªæŠ¥é”™ï¼Œè¯´ç½‘ç»œä¸å­˜åœ¨ã€‚å¥½å§ï¼Œdocker compose çš„ç¡®ï¼Œæ²¡æœ‰åˆ›å»º networkã€‚æˆ‘æ˜¯ç”¨çš„ç½‘ç»œå«åš <code>lnmp</code>ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network create lnmp</span></span></code></pre></div><p>åˆ›å»ºç½‘ç»œå³å¯ï¼Œå†æ¬¡ <code>up</code>ã€‚æˆåŠŸå¯åŠ¨ã€‚</p><p>ä½†æ˜¯åœ¨ä½¿ç”¨ <code>docker ps</code> å‘ç° nginx æ²¡æœ‰å¯åŠ¨ï¼Œé€šè¿‡ <code>docker logs nginx</code> æ—¥å¿—æŸ¥çœ‹å‘ç°ï¼ŒSSL è¯ä¹¦æ²¡æœ‰äº† ğŸ˜­ï¼Œéœ€è¦é‡æ–°æè¯ä¹¦äº†ã€‚</p><h3 id="åˆ›å»ºè¯ä¹¦" tabindex="-1">åˆ›å»ºè¯ä¹¦ <a class="header-anchor" href="#åˆ›å»ºè¯ä¹¦" aria-label="Permalink to &quot;åˆ›å»ºè¯ä¹¦&quot;">â€‹</a></h3><p>ä¹‹å‰ä½¿ç”¨ acmeshï¼Œè¿™æ¬¡ä¹Ÿä½¿ç”¨å®ƒå§ï¼Œä¸ºäº†ä¿è¯ä¸‹æ¬¡è¿ç§»ï¼Œè¿˜æ˜¯ä½¿ç”¨ acme çš„é•œåƒå§ã€‚å¦‚ä¸‹æ˜¯ docker compose çš„é…ç½®</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>acme:</span></span>
<span class="line"><span>    image: neilpang/acme.sh</span></span>
<span class="line"><span>    container_name: acme</span></span>
<span class="line"><span>    volumes:</span></span>
<span class="line"><span>      - ./nginx/acme:/acme.sh</span></span>
<span class="line"><span>    command: &quot;daemon&quot;</span></span>
<span class="line"><span>    environment:</span></span>
<span class="line"><span>      TZ: Asia/Shanghai</span></span>
<span class="line"><span>      DP_Id: ******</span></span>
<span class="line"><span>      DP_Key: ******************************</span></span></code></pre></div><p>å› ä¸ºæˆ‘çš„æœåŠ¡å™¨æ˜¯è…¾è®¯äº‘çš„ï¼Œæ‰€ä»¥ä½¿ç”¨ DNSPOD åšè§£æï¼ŒDP_Idï¼ˆDNSPod å¯†é’¥ IDï¼‰ã€DP_Keyï¼ˆDNSPod å¯†é’¥ tokenï¼‰ é€šè¿‡ <a href="https://console.dnspod.cn/account/token/token" target="_blank" rel="noreferrer">DNSPod æ§åˆ¶å°</a>è·å– ä¸ºäº†æ–¹ä¾¿ï¼Œåšä¸€ä¸ª alias ä½¿ç”¨</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-tL0Js" id="tab-fdG9QD3" checked="checked"><label for="tab-fdG9QD3">/etc/profile</label></div><div class="blocks"><div class="language-sh vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> acme</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;docker exec -i acme acme.sh&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/profile</span></span></code></pre></div></div></div><p>æ¥ç”³è¯·è¯ä¹¦</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ³¨å†Œä¸‹é‚®ç®±</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --register-account</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xxx@email.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç”³è¯·</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dns_dp -d catchadmin.com -d </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.catchadmin.com</span></span></code></pre></div><p>è¿™ä¸ªæ­¥éª¤æ˜¯è‡ªåŠ¨çš„ï¼Œç”³è¯·å®Œæˆä¹‹åï¼Œè¯ä¹¦å°±å›ä¸‹è½½åˆ° <code>volumes</code> è®¾ç½®çš„ç›®å½•ï¼Œå¯æ ¹æ®å®é™…é…ç½®è¯ä¹¦</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>ç”³è¯·è¯ä¹¦æœŸé—´ä¼šè¯·æ±‚ githubï¼Œè¿˜æ˜¯ç”±äºå›½å†…æ¶åŠ£çš„ç½‘ç»œç¯å¢ƒï¼Œä¼šå¯¼è‡´ç”³è¯·ä¸äº†ï¼Œéœ€è¦é…ç½®ä¸‹ hostï¼Œäº²æµ‹å¯ä»¥è§£å†³ã€‚</p></div><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-tcM5l" id="tab-1mCyB4H" checked="checked"><label for="tab-1mCyB4H">/etc/hosts</label></div><div class="blocks"><div class="language-sh vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">20.27.177.113</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">185.199.110.133</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> raw.githubusercontent.com</span></span></code></pre></div></div></div><p>åƒä¸‡ä¸è¦å¤åˆ¶ä¸Šé¢çš„ host é…ç½®ï¼Œä½ éœ€è¦å…ˆæŸ¥è¯¢ï¼Œæœ‰å¯èƒ½ä¼šå˜åŒ–ï¼Œæ‰€ä»¥ï¼Œä½ å…ˆä½¿ç”¨<a href="https://ping.chinaz.com/github.com" target="_blank" rel="noreferrer">ç«™é•¿å·¥å…·</a>æŸ¥è¯¢ï¼Œping æ£€æµ‹å“ªä¸ª IP åœ°å€æ˜¯é€šçš„ï¼Œå°±ç”¨å“ªä¸ªã€‚ç›¸åŒçš„ raw.githubusercontent.com è¿™ä¸ªä¹Ÿæ˜¯ä¸€æ ·ã€‚</p><h2 id="ci-cd-è‡ªåŠ¨åŒ–" tabindex="-1">CI/CD è‡ªåŠ¨åŒ– <a class="header-anchor" href="#ci-cd-è‡ªåŠ¨åŒ–" aria-label="Permalink to &quot;CI/CD è‡ªåŠ¨åŒ–&quot;">â€‹</a></h2><p>å¥½äº†ï¼Œç¯å¢ƒï¼Œç¯å¢ƒç›¸å…³ä»£ç æ•°æ®éƒ½å·²ç»è¿ç§»å¥½äº†ï¼Œå°±å·®é¡¹ç›®ä»£ç äº†ã€‚ç°åœ¨ <code>CatchAdmin</code> é¡¹ç›®éƒ½æ˜¯å¾ˆåŸå§‹çš„éœ€è¦äººå·¥å»æ‰‹åŠ¨æ‹‰å–ä»£ç ã€‚è¿™é‡Œæ˜¯è¯´é¡¹ç›®ä»£ç ï¼Œä¹‹å‰çš„å®˜ç½‘å› ä¸ºæ˜¯é™æ€æ–‡æ¡£ï¼Œæ‰€ä»¥ä½¿ç”¨çš„ github action éƒ¨ç½²ã€‚ä½†æ˜¯ PHP ç›¸å…³çš„é¡¹ç›®å´æ²¡æœ‰ï¼Œè¿™æ¬¡æ·±å…¥äº†è§£äº† github action ä¹‹åï¼Œç»ˆäºå®ç°è‡ªåŠ¨éƒ¨ç½²ã€‚</p><p>è¿™é‡Œå±•ç¤ºä¸‹å®˜ç½‘çš„éƒ¨ç½² yml é…ç½®ï¼Œæœ‰éœ€è¦çš„å°ä¼™ä¼´å¯ä»¥æ ¹æ®è¿™ä¸ªé…ç½®ä¿®æ”¹éƒ¨ç½²è‡ªå·±çš„é¡¹ç›®ã€‚å‰ææœ‰ä¸€ç‚¹å“ˆï¼Œæ²¡æ³•è‡ªåŠ¨åˆ›å»º <code>.env</code> æ–‡ä»¶ ğŸ˜‚ï¼Œ<code>.env </code>ç¯å¢ƒæ–‡ä»¶è¿˜éœ€è¦è‡ªå·±æ‰‹åŠ¨å»åˆ›å»ºï¼Œå› ä¸ºé‡Œé¢æ¶‰åŠåˆ°ä¸€äº›é…ç½®ã€‚</p><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">å®˜ç½‘æ„å»º</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    branches</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">master</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  deploy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      Exclude</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/node_modules/,/.git/,/.github,/docs,/.env&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      VENDOR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${{ secrets.SERVER_WORKDIR }}/vendor</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      ENVFILE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${{ secrets.SERVER_WORKDIR }}/.env</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # checkout master åˆ†æ”¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Checkout</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/checkout@master</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # è®¾ç½® PHP</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Setup PHP with PECL extension</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shivammathur/setup-php@v2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          php-version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;8.2&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          tools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">composer:v2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # æ£€æŸ¥ vendor</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">webfactory/ssh-agent</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">webfactory/ssh-agent@v0.8.0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          ssh-private-key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${{ secrets.SERVER_SECRET }}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Cache Composer dependencies</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/cache@v3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">vendor</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${{ runner.os }}-official-composer-${{ hashFiles(&#39;**/composer.json&#39;) }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          restore-keys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            ${{ runner.os }}-official-composer-</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # å®‰è£… composer ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">composer install</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          composer install</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          composer dump-autoload</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      ## åˆ¤æ–­æ˜¯å¦æœ‰ .env æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Check .env</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">check_env</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          ssh -o StrictHostKeyChecking=no ${{secrets.SERVER_USERNAME}}@${{secrets.SERVER_HOST}} &#39;if [ -d &quot;$ENVFILE&quot; ]; then exit 1; else exit 0; fi&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        continue-on-error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      ## å¦‚æœ .env ä¸å­˜åœ¨ï¼Œå°±ç”Ÿæˆ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">generate .env</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">steps.check_env.outcome == &#39;failure&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          cp .env.example .env</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          php artisan key:generate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # éƒ¨ç½²å‰ç«¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Install and Build assets</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          yarn install</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          yarn build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">éƒ¨ç½²å®˜ç½‘</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">easingthemes/ssh-deploy@v5.0.0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          REMOTE_HOST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${{ secrets.SERVER_HOST }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          REMOTE_USER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${{ secrets.SERVER_USERNAME }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          SSH_PRIVATE_KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${{ secrets.SERVER_SECRET }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          ARGS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-rlgoDzc -i --delete</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          SOURCE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          REMOTE_PORT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${{ secrets.SERVER_PORT }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          TARGET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${{ secrets.SERVER_WORKDIR }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          EXCLUDE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${{ env.Exclude }}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      ## Laravel Optimize</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">optimize</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">appleboy/ssh-action@v1.0.3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          host</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${{ secrets.SERVER_HOST }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${{ secrets.SERVER_USERNAME }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${{ secrets.SERVER_SECRET }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${{ secrets.SERVER_PORT }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            cd ${{ secrets.SERVER_WORKDIR }}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            composer dump-autoload</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            php artisan optimize:clear</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            php artisan optimize</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        continue-on-error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><p>ä¸‹æ¬¡å¯ä»¥è¯¦ç»†è¯´è¯´ Github Actionï¼ŒğŸ¤ª å¯ä»¥å¤šå¤šç‚¹èµ(éª—èµ)</p><h2 id="éƒ¨ç½²æ–°æ–‡æ¡£" tabindex="-1">éƒ¨ç½²æ–°æ–‡æ¡£ <a class="header-anchor" href="#éƒ¨ç½²æ–°æ–‡æ¡£" aria-label="Permalink to &quot;éƒ¨ç½²æ–°æ–‡æ¡£&quot;">â€‹</a></h2><p>æ–‡æ¡£è¿˜æ˜¯ä¸€å¦‚æ—¢å¾€çš„ä½¿ç”¨é™æ€æ–‡æ¡£ï¼Œè¿™æ¬¡æˆ‘è¿˜æ˜¯é€‰æ‹©äº† vue ç¤¾åŒºçš„ <code>vitepress</code>ï¼Œå› ä¸ºè¶³å¤Ÿç®€å•ã€‚å¯èƒ½æˆ‘ä¹Ÿæ¯”è¾ƒç†Ÿæ‚‰ Vueã€‚<code>docusaurus</code> ä¹Ÿè›®å¥½çš„ï¼Œåªä¸è¿‡åœ¨ä¸€äº›æ‰©å±•æ–¹é¢çš„ç¡®ä¸å¦‚è¿™ä¸ªæ–¹ä¾¿ï¼Œæˆ‘ä¹Ÿæ˜¯ç›¸äº’å¯¹æ¯”ä¸€ä¸‹ã€‚è¿˜æœ‰ä¸€ç‚¹è€ƒè™‘åˆ°çš„æ—¶å€™ï¼Œ<code>docusaurus</code> æ˜¯æ»¡å±çš„å¸ƒå±€ï¼Œæ–‡æ¡£ç„¦ç‚¹æ²¡æ³•èšé›†ã€‚<code>vitepress</code> å¸ƒå±€é€‚åˆçœ‹æ–‡æ¡£ï¼Œå†…å®¹èšé›†åœ¨ä¸­é—´ä¸€å— Blockã€‚æˆ‘ä¸ªäººä½“éªŒæ¯” <code>docusaurus</code> è¦å¥½ã€‚</p><p>å¥½äº†ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œæ–‡æ¡£æˆ‘æ˜¯å’Œå®˜ç½‘æ”¾åœ¨ä¸€å—çš„ï¼Œä¹Ÿå°±æ˜¯å®˜ç½‘çš„æ ¹ç›®å½•ï¼Œå¹¶æ²¡æœ‰åœ¨å®˜ç½‘çš„ public ç›®å½•ä¸‹ã€‚çœ‹ä¸‹ Github Action Workflow çš„é…ç½®</p><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Build and Deploy</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    branches</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">master</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  build-and-deploy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Checkout</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/checkout@master</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Install and Build</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          yarn install</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          yarn docs:build</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Deploy</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">easingthemes/ssh-deploy@v5.0.0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          REMOTE_HOST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${{ secrets.SERVER_HOST }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          REMOTE_USER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${{ secrets.SERVER_USERNAME }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          SSH_PRIVATE_KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${{ secrets.SERVER_SECRET }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          ARGS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-avzr --delete</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          SOURCE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;docs/.vitepress/dist/&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          REMOTE_PORT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${{ secrets.SERVER_PORT }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          TARGET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${{ secrets.SERVER_WORKDIR }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          EXCLUDE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/docs/.vitepress/, /node_modules/, /.github,/.git&#39;</span></span></code></pre></div><p>å‰ç«¯é¡¹ç›®éƒ¨ç½²ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯ä¸Šä¼ é™æ€æ–‡ä»¶å°±è¡Œäº†ã€‚æˆ‘æ˜¯å°†æ–‡æ¡£ä¸Šä¼ åˆ° Docs ç›®å½•ä¸‹ã€‚å¥½çš„ï¼Œä½ ä¼šå‘ç°å®ƒæ˜¯å’Œå®˜ç½‘åŒåŸŸåï¼ŒæŒ‚è½½åœ¨ä¸€ä¸ªç›®å½•ä¸‹ã€‚è¿™ç§æ˜¯å¯ä»¥é€šè¿‡ nginx æ¥å®ç°ï¼Œæ¥çœ‹ä¸‹, è¿™é‡Œä¸å±•ç¤ºå…¨éƒ¨äº†ï¼Œåªå±•ç¤ºç›¸å…³çš„ location é…ç½®</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-plt_e" id="tab-cOsg6Kw" checked="checked"><label for="tab-cOsg6Kw">official.conf</label></div><div class="blocks"><div class="language-conf vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">conf</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>server</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    // è¿™é‡Œæ˜¯å…¨åŒ¹é… 301</span></span>
<span class="line"><span>    location = /docs/3.0/catchadmin/project_intro {</span></span>
<span class="line"><span>            return 301 /docs/3.0/start/project_intro;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    // è¿™é‡Œæ˜¯å…¨åŒ¹é… 301</span></span>
<span class="line"><span>    location = /docs/3.0/catchadmin/install {</span></span>
<span class="line"><span>         return 301 /docs/3.0/start/install;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    // æ–‡æ¡£çš„å‰ç¼€éƒ½æ˜¯ /docs</span></span>
<span class="line"><span>    // æ‰€ä»¥éœ€è¦åŒ¹é… /docs</span></span>
<span class="line"><span>    // ç„¶åä¿®æ”¹ root ç›®å½•</span></span>
<span class="line"><span>    location ^~ /docs {</span></span>
<span class="line"><span>        root /var/www/html/official/docs;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        // å› ä¸ºå‘ç°ç™¾åº¦æœ‰ä¸€äº›é“¾æ¥ä»¥ / ç»“å°¾ï¼Œå¯¼è‡´ä¸å¯ç”¨ï¼Œè¿™é‡Œå»é™¤æ–œæ </span></span>
<span class="line"><span>        rewrite ^/(.*)/$ /$1 permanent;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        // å› ä¸º vitepress éƒ½æ˜¯ä»¥ .html ç»“å°¾çš„æ–‡ä»¶ï¼Œé“¾æ¥å¹¶æ²¡æœ‰ï¼Œæ‰€ä»¥è¦å»é™¤ .html</span></span>
<span class="line"><span>        try_files $uri $uri.html $uri/ /docs/3.0/intro;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre></div></div></div><p>å¥½äº†ï¼Œä»¥ä¸Šå°±æ˜¯ <code>CatchAdmin</code> è¿™æ¬¡è¿ç§»çš„å…¨è¿‡ç¨‹ï¼Œè™½ç„¶å†™èµ·æ¥éå¸¸çŸ­ï¼Œä½†å…¶å®è¿‡ç¨‹è¿˜æ˜¯å¾ˆæ¼«é•¿çš„ã€‚æ‰€ä»¥ç°åœ¨å¯ä»¥å»æ–°å®˜ç½‘çœ‹ä¸‹å’¯ <a href="https://catchadmin.com" target="_blank" rel="noreferrer">CatchAdmin å®˜ç½‘</a></p></div></div></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"2023-10_use-heroicons.md\":\"ONUvv9dv\",\"2023-10_front-use-tip.md\":\"J3iBb2jC\",\"2023-10_use-mock.md\":\"Asko6I3x\",\"2023-10_vue3-elementplus-route-not-found.md\":\"eWgWYnNW\",\"2023-10_status-component.md\":\"F8tuSBSJ\",\"2023-10_dynamic-config.md\":\"_Dt9jBBZ\",\"2023-10_use-pinia.md\":\"Qdo19cSy\",\"2023-10_deploy-docs.md\":\"RfoUvfe0\",\"2023-10_vue-i18n.md\":\"lHwn7cH8\",\"2023-10_laravel-make-with-vue.md\":\"G0Y96GLS\",\"2024-01_website-migration.md\":\"1bYjYX0S\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"VitePress\",\"description\":\"A VitePress site\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>